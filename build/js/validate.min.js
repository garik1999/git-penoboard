const MAIL_FORMAT=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,helpers={valid:function(t){t.find(".error").remove(),t.find("input").addClass("valid").removeClass("invalid")},invalid:function(t,i=""){t.find(".error").length<=0&&t.append("<span class='error'>"+i+"</span>"),t.find("input").removeClass("valid").addClass("invalid")}},config={email:function(t){setEvents(t,validationEmail,"blur")},password:function(t){void 0!==t.attr("data-equalTo")?setEvents(t,validationPasswordTwo,"blur"):setEvents(t,validationPassword,"blur")},checkbox:function(t){setEvents(t,validationCheckBox,"click")},text:function(t){setEvents(t,validationText,"click")}};function setEvents(t,i,n=""){t.on("input change "+n,(function(){i(t),formSubmit(t.parents(".form"))}))}function formSubmit(t){let i=t.find("input").length,n=t.find(".valid").length,a=t.find("button, [type=submit]");i===n?a.removeClass("disabled"):a.addClass("disabled")}function validationText(t){t.val().length>=3?helpers.valid(t.parent()):helpers.invalid(t.parent(),"Не менее 3 символов")}function validationCheckBox(t){t.prop("checked")?helpers.valid(t.parent()):helpers.invalid(t.parent(),"Нужно согласится")}function validationEmail(t){t.val().match(MAIL_FORMAT)?helpers.valid(t.parent()):helpers.invalid(t.parent(),"Не верный формат эмейл")}function validationPassword(t){let i=t.attr("name");t.parents(".form").find(`[data-equalTo=${i}]`).val("").blur(),t.val().length>8?helpers.valid(t.parent()):helpers.invalid(t.parent(),"Минимум 8 символов")}function validationPasswordTwo(t){let i=t.attr("data-equalTo");if(void 0!==typeof i){let n=t.parents(".form").find(`input[name='${i}']`);t.val()===n.val()?helpers.valid(t.parent()):helpers.invalid(t.parent(),"Пароли не совпадают")}}function initElement(t){$(""+t).find("input").each((function(){let t=$(this).attr("type");void 0!==typeof t&&config[t]($(this))}))}initElement(".form");class Validation{constructor(t){this.form=t}init(){this.initElement()}initElement(){this.form.find("input").each((function(){let t=$(this).attr("type");void 0!==typeof t&&(config[t]($(this)),console.log(t))}))}}const validate=new Validation($(".form"));console.log(validate.init());